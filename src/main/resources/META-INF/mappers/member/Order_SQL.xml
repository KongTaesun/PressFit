<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="order">
	
    <select id="orderList" resultType="kr.co.pressfit.vo.CartVO">
        SELECT *,(price * amount) money 
        FROM cart_board
        where payment ='Y' 
        AND user_id = #{id}
         
        ORDER BY cart_id
    </select>


	<select id="orderDeatail" resultType="kr.co.pressfit.vo.CartVO" parameterType="java.util.List">
		SELECT *,(price * amount) money 
        FROM cart_board
        where cart_id in
        <foreach item="item" collection="list"
     					open="(" separator="," close=")">
       				#{item}
		</foreach>
                 
        ORDER BY cart_id
	</select>
	
	<select id="memberInfo" resultType="kr.co.pressfit.vo.MemberVO">
        SELECT *
        FROM Cmember
        where id = #{id}
    </select>
	
	<update id="test" parameterType="map">
		update cart_board c
		set c.payment = 'Y',
			c.orderdate = now(),
			c.methodpayment = #{methodpayment}
		where cart_id in
		<foreach item="item" collection="list"
     					open="(" separator="," close=")">
       				#{item}
		</foreach>
		
	</update>

<!-- 	<select id="orderCancel" resultType="kr.co.pressfit.vo.MemberVO">
		SELECT *
        FROM Cmember
        where id = #{id}
	</select> -->

 	<update id="orderConfirm">
		update cart_board 
		set shippingStatus = 2
		where user_id = #{id}
		AND cart_id = #{cart_id}
	</update>

 <select id="orderCancel" resultType="kr.co.pressfit.vo.CartVO">
        SELECT *,(price * amount) money 
        FROM cart_board
        where user_id = #{id} 
        ORDER BY cart_id
    </select>

 	<update id="orderCancelaction">
		update cart_board 
		set shippingStatus = 3
		where user_id = #{id}
		AND cart_id = #{cart_id}
	</update>
 
</mapper>








